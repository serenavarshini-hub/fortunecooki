<!DOCTYPE html>
<html>
  <head>
    <title>AR Fortune Cookie</title>
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.4/aframe/build/aframe-ar.js"></script>

    <script>
      AFRAME.registerComponent('fortune-generator', {
        init: function () {
          const fortunes = [
            "Your next big idea is loading…",
            "A promotion is closer than it appears.",
            "Someone thinks you're the office MVP today.",
            "You will debug something in one try. Believe.",
            "Your chai break will arrive at the perfect moment.",
            "A surprise compliment is coming your way.",
            "Your boss secretly appreciates you… a lot.",
            "Today is a top-tier productivity day.",
            "Your inbox will be kinder than usual.",
            "A new skill will click perfectly this week.",
            "You will close a ticket faster than Jira updates.",
            "Someone in this building is grateful for you.",
            "A lucky opportunity will open up soon.",
            "Your hard work is being noticed.",
            "Good vibes are chasing you—don’t run."
          ];

          const fortune = fortunes[Math.floor(Math.random() * fortunes.length)];

          const textEntity = document.querySelector("#fortuneText");
          textEntity.setAttribute("value", fortune);

          // Floating animation
          textEntity.setAttribute("animation__float", {
            property: "position",
            to: "0 1 0",
            dur: 3000,
            dir: "alternate",
            loop: true
          });

          // Fade-in
          textEntity.setAttribute("animation__fade", {
            property: "opacity",
            from: 0,
            to: 1,
            dur: 1500
          });

          // Redirect after 7 seconds
          setTimeout(() => {
            window.location.href = "https://linktr.ee/galentreviews";
          }, 7000);
        }
      });
    </script>

    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="antialias: true">
      
      <!-- Marker -->
      <a-marker preset="hiro" fortune-generator>

        <!-- Animated GIF behind the text -->
        <a-image 
          src="https://giphy.com/stickers/happy-excited-10Bb1Bq7BMi9Co.gif"
          position="0 0.6 -0.1"
          width="1.8"
          height="1.0"
          opacity="0.8">
        </a-image>

        <!-- Floating fortune text -->
        <a-entity
          id="fortuneText"
          text="value: ; color: #FFD700; align: center; width: 3;"
          position="0 0.6 0"
          opacity="0">
        </a-entity>

      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
